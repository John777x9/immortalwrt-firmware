#!/bin/bash
# ============================================
# GL.iNet GL-MT3000 (Beryl AX)
# MediaTek MT7981B, 512MB RAM, 256MB NAND
# ============================================

REPO="https://github.com/immortalwrt/immortalwrt.git"
BRANCH="master"

TARGET="mediatek"
SUBTARGET="filogic"
DEVICE="glinet_gl-mt3000"

DESCRIPTION="GL.iNet MT3000 Beryl AX - MediaTek MT7981B"

PACKAGES=(
    # --- 代理 ---
    +luci-app-homeproxy
    +luci-app-passwall

    # --- 主题 ---
    +luci-theme-argon
    +luci-app-argon-config

    # --- 系统工具 ---
    +luci-app-ttyd
    +luci-app-ddns-go
    +luci-app-frpc
    +luci-app-upnp

    # --- 网络诊断 ---
    +tcpdump
    +curl
    +wget-ssl
    +ip-full

    # --- 透明代理内核模块 ---
    +kmod-nft-tproxy
    +kmod-nft-socket
    +kmod-nft-fullcone
    +kmod-tun
    +kmod-inet-diag
    +sing-box

    # --- 去掉（MT3000闪存较小，精简）---
    -luci-app-rclone
    -luci-app-banip
    -luci-app-ramfree
    -luci-app-samba4
    -luci-app-netdata
)

LANG="zh-cn"
SINGBOX_FEATURES=(ACME ECH GVISOR QUIC REALITY_SERVER UTLS WIREGUARD)
PASSWALL_INCLUDE=(Haproxy Shadowsocks_Rust_Client Shadowsocks_Rust_Server Simple_Obfs SingBox V2ray_Geoview V2ray_Plugin Xray)
